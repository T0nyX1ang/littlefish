# 更新日志

## 1.0.5

- 新增对戳一戳的复读
- 信息查询时新增排名变化项
- 优化成绩比较功能
- 优化群成员信息更新机制
- 优化 42 点代码结构，分离公共代码至`_game`子模块内
- 考虑到数据统一性，权限控制移除临时权限设置功能

## 1.0.4

- 优化数据库存储机制，新增存储上限环境变量
- 优化指南链接显示形式
- 修复成员加群和退群问题，修复群成员信息获取问题
- 合并小鱼的测试模式和普通模式
- 优化资源文件载入方式
- 优化复读红包机制
- 使用全局数据库记录直播数据，减少直播推送的数据量
- 新增查询直播推送 UID 功能
- 分离权限控制模块为`rule`和`plugin`两部分
- 新增自定义权限指令`on_raw_keyword`，用于消息关键词查询
- 新增自定义权限指令`on_simple_command`，用于无参数的简单命令
- `broadcast`权限支持标识符触发多个指令
- 移动 42 点中排名模块至下层的游戏模块中，增强普适性
- 42 点新增日得分榜，优化排名与得分显示

## 1.0.3

- 适配`nonebot v2.0.0a12-13`版本
- 修复复读代码问题
- 新增对数字的变形复读机制与对红包的复读机制
- 优化每周排名人数更新时间
- 将直播推送的异步查询改为线性查询，提高查询稳定性
- 优化文档，采用`Vuepress`进行排版和发布

## 1.0.2

- 适配`nonebot v2.0.0a11`版本
- 改进基于时间的精细触发权限`broadcast`
- 新增基于命令键的简单权限`valid`
- 优化每日一星和各等级人数的存档机制
- 重构录像解析器，支持分析 UPK 录像
- 42 点小游戏新增随机点数功能，优化提示功能

## 1.0.1

- 调整手动触发 42 点权限
- 调整手动触发 42 点为不计分模式
- 新增 42 点随机目标功能
- 权限控制模块支持设置和移除临时权限，该权限重启时会重置

## 1.0.0

- 优化 42 点结束时回复
- 修复部分命令响应错误

## 1.0.0-alpha.2

- 直播推送使用`share`语法，提升观感
- 修复 42 点的一系列问题
- 启用数据库压缩(不兼容`1.0.0-alpha.1`版本)
- 新增版本检验，优化启动时消息
- 优化模块权限控制

## 1.0.0-alpha.1

- 适配联萌 v3.1.05 版本
- 适配 nonebot v2 版本
- 大幅度重构代码，提高代码可读性，增加了一些注释
- 修复权限配置文件逻辑错误问题
- 新增资源索引文件
- 优化数据库结构(不兼容`0.9.2`版本)
- 大幅改进联萌服务器访问速度，优化查询 API，完全支持异步访问
- 新增联萌 ID 排名比较功能
- 新增(左向)增量复读及随机 QQ 表情变形复读
- 取消各类~~耗时的~~图片发送行为
- 新增 B 站直播推送功能
- 新增加群 ID 检验功能
- ~~作者自己也忘记还改了啥，因为太久没更新了~~

## 0.9.2

- 修复 42 点积分问题
- 大幅修改 42 点积分与时间规则
- 新增联萌安装包下载地址
- 修改打架逻辑
- 更新配置文件识别规则
- 新增更新内容显示
- 修改小黑屋触发方式

## 0.9.1

- 更新等价解定义
- 新增打架判定条件
- (尝试)修复低速环境下图片发送失败的问题
- 移除雷网相关模块

## 0.9.0

- 适配联萌 v3 版本
- 新增联萌今日之星功能，与雷网每日一星同时播报
- 新增人气榜前十查询，移除无猜榜前十查询
- 新增精确权限控制功能
- 新增独立触发 42 点语句
- 修复群内昵称更新的问题
- 新增倒装复读功能
- 更新打招呼语句，微调时段

## 0.8.4

- 新增组员变动通知和加群提醒(需要机器人为管理员)
- 优化小黑屋设计
- 新增复读图片功能
- 新增游戏频率变量
- 修改 42 点计分规则

## 0.8.3

- 优化 42 点规则
- 新增增量复读功能
- 新增小黑屋功能
- 优化膜佬语句

## 0.8.2

- 新增膜佬动图
- 优化资源加载路径
- 修复用户信息自动更新的问题
- 修复因图片未关闭导致的内存泄漏
- 优化 42 点接口

## 0.8.1

- 修复录像图片的翻转问题
- 优化录像图片的生成速度
- 优化 42 点题库生成策略
- 新增定时获取群员信息功能

## 0.8.0

- 支持酷 Q 至 Mirai 的兼容更改
- 新增数据库操作指令
- 修改 42 点积分与结算规则
- 新增`打断复读`功能
- 新增鼓励语句
- 新增文字转图片功能
- 录像分析支持发送录像图片
- 改进群员数据库(不兼容`0.7.4`版本)

## 0.7.4

- 新增 42 点积分与积分榜功能
- 新增数据库及相关 SUPERUSER 操作
- 代码开源

## 0.7.3

- 新增查询雷网 ID 功能
- 重新封装 42 点功能
- 新增打招呼语句
- 新增 SUPERUSER 的`debug`权限
- 限制 SUPERUSER 个数

## 0.7.2

- 修复了录像分析的问题
- 新增了 42 点题库，问题将从题库中随机给出
- 调整机器人打招呼指令
- 修改了`enable`命令对全局变量的更新逻辑

## 0.7.1

- 改进权限控制策略，实现更精细的权限控制
- 将所有全局变量置于相同文件中，方便管理
- 新增机器人中文名
- 机器人重启后需要手动开启

## 0.7.0

- 更新 42 点小游戏规则
- 新增机器人打招呼指令
- 调整录像分析中点击识别阈值

## 0.6.4

- 将`status`的群员权限降低为 SUPERUSER
- 采用新的网页模板
- 引入版本控制

## 0.6.3

- 新增复读功能
- 修改用户信息查询功能的语法
- 新增用户信息查询功能的冷却时间

## 0.6.2

- 分离自动推送和录像分析功能
- 支持显示每等级合计人数
- 更好地支持多群组的使用
- 将`login`，`logout`的管理权限降低为 SUPERUSER

## 0.6.1

- 修复 42 点小游戏的相关问题
- 修复雷网的编码问题
- 新增查询联萌每等级人数功能

## 0.6.0

- 新增机器人打架功能
- 用户破纪录时支持显示当前等级与排名
- 新增 42 点小游戏功能

## 0.5.5

- 在录像分析中新增`游戏难度`与`stnb`参数
- 修复`solved_bv`为`0`时的计算错误
- 用户信息中新增雷网关联页面
- 修复每日一星的显示错误

## 0.5.4

- 新增对战机器人查询功能
- 修复因多指触控造成的`solved_bv`计算错误
- 优化录像分析的时间复杂度
- 更新膜佬模块的随机语句

## 0.5.3

- 引入 SUPERUSER 机制
- 新增膜佬的随机语句
- 使用更统一的推送格式

## 0.5.2

- 结合录像分析与膜佬功能
- 新增每日一图功能
- 改进用户破纪录时，`postID`和`recordID`获取不同步的问题

## 0.5.1

- 修复无法定时推送的问题
- 修复录像分析中`CE`计算的问题
- 新增膜佬功能
- 修复录像分析中的网址识别问题

## 0.5.0

- 新增多个排行榜查询功能
- 项目逐步向完全的异步处理过渡
- 新增每日一星定时推送功能
- 新增自动录像分析功能

## 0.4.2

- 录像分析中新增对`FL`与`NF`模式的判定
- 改进录像分析的呈现形式
- 新增用户指南功能

## 0.4.1

- 改进录像分析的呈现形式
- 修复录像分析中`solved_bv`与`bv`的处理问题
- 引入日志系统
- 将文档变成网页形式

## 0.4.0

- 新增录像分析功能
- 取消用户信息中的`游戏时长`条目
- 群内命令可以不通过`@机器人`的方式使用

## 0.3.0

- 新增用户信息查询功能
- 新增经典模式排名查询功能

## 0.2.0

- 新增通用网络模块，可以与联萌服务器正常通信
- 新增账号系统，管理员可控制联萌账号的登录与退出
- 为每个命令设置了权限控制

## 0.1.0

- 引入机器人模块，引入配置文件
- 引入模块导入器
- 新增查询每日一星功能
