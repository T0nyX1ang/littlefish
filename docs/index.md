# mswar-bot

## 简介
mswar-bot是一个基于NoneBot的异步IO机器人, 用于扫雷联萌(原扫雷大作战)的相关信息查询和膜佬操作.

## 使用说明
以下`/`表示等价的命令名称, `[ ]`表示简写的参数形式, `|`表示不同的参数选择, 请务必注意参数与命令之间需要`空格`间隔.

### 管理员权限(包含SUPERUSERS)
管理员可以登录/退出登录机器人关联的账号, 当机器人关联账号处于登出状态时, 大部分功能无法使用, 其语法如下:
+ 登录机器人关联账户
```
    login/登录
```
+ 登出机器人关联账户
```
    logout/登出/退出登录
```

### 普通群用户权限
普通群用户可以使用如下功能:
+ 显示此指南网址

```
    guide/指南
```

+ 获取机器人关联账户登录状态

```
    status/状态/账号状态
```

+ 获取雷网每日一星

```
    dailystar/每日一星
```

+ 自动推送雷网每日一星(每天00:01:30进行推送, 误差为30秒, 该功能自动触发, 广播至**所有**机器人加入的群中)

+ 每日一图查询(包括图的特征和第一名成绩)

```
    dailymap/每日一图
```

+ 自动推送每日一图查询(每天00:03:00进行推送, 误差为30秒, 该功能自动触发, 广播至**所有**机器人加入的群中)

+ 按ID搜索联萌用户

```
    id/idsearch/查询/查找 用户ID
```

+ 按昵称搜索联萌用户(该功能是模糊查询, 搜索结果为经典模式排位最高的用户)

```
    name/nickname/namesearch/昵称 用户昵称
```

+ 获取联萌每个等级的排名

```
    level
```

+ 自动推送联萌每个等级的排名(每周一00:00:00进行推送, 误差为30秒, 该功能自动触发, 广播至**所有**机器人加入的群中)

+ 经典模式排行榜查询(最多查询 20 名用户)

```
    rank/ranking/排名 # 用于查询时间榜前10名
    rank/ranking/排名 [t]ime/时间|[b]vs/3bvs 起始排名 终止排名 # 用于查询时间榜起始排名至终止排名
    rank/ranking/排名 [t]ime/时间|[b]vs/3bvs 起始排名 终止排名 [a]ll/全部|[n]f/盲扫|[f]l/标旗 [a]ll/全部|[i]nt/初级|[b]eg/中级|[e]xp/高级 # 所有参数
```

+ 各种其它的娱乐模式排行榜查询(仅查询对应排行榜前10名, 后面设定的参数会被直接忽略)

```
    rank/ranking/排名 [e]ndless/无尽     # 无尽排行榜
    rank/ranking/排名 [n]onguessing/无猜 # 无猜排行榜
    rank/ranking/排名 c[o]in/财富        # 雷币排行榜
    rank/ranking/排名 [c]haos/乱斗       # 乱斗排行榜
    rank/ranking/排名 [a]dvance/进步     # 进步排行榜
```

+ 膜佬功能

```
    praise/膜/膜拜            # 空泛膜拜
    admire/狂膜               # 用于复读的空泛膜拜
    praise/膜/膜拜 大佬的名字  # 定向膜拜
    admire/狂膜    大佬的名字  # 用于复读的定向膜拜
```

+ 录像数据解析功能

```
    analyze/分析 [r]ecord/录像 录像ID          # 根据录像ID解析
    analyze/分析 [p]ost/帖子   帖子ID          # 根据发帖ID解析  
    analyze/分析 [r]ecord/录像 录像ID 大佬名字  # 根据录像ID解析+膜佬
    analyze/分析 [p]ost/帖子   帖子ID 大佬名字  # 根据发帖ID解析+膜佬
```

+ 分享录像链接自动解析功能(该功能在提取到`http://tapsss.com`与`post=`关键词后自动触发)

+ 自动膜佬功能(该功能在在提取到`http://tapsss.com`, `post=`, `恭喜`与`刷新`关键词后自动触发, 包含录像解析功能)

+ 查询[对战机器人](https://github.com/T0nyX1ang/mswar-bot-autopvp)状态

```
    autopvp/对战机器人
```

+ 自动推送[对战机器人](https://github.com/T0nyX1ang/mswar-bot-autopvp)状态(每天00:00:00进行推送, 误差为30秒, 该功能自动触发, 广播至**所有**机器人加入的群中)

+ 机器人打架功能(需要群内有两个机器人, 且自行设置好`触发语句`, 每天00:00:00与12:00:00重置次数, 打架重复迭代上限为5次)

**警告: 目前计数器是全局计数器, 会影响加入多个群的机器人.**

```
    conflict/打架/{触发语句}
```

+ 算42点小游戏(每日8-23:42:42自动触发, 广播至**所有**机器人加入的群中)

**游戏规则: 给出5个位于0至13之间的整数, 你需要将这五个整数(可以调换顺序)通过四则运算与括号相连, 使得结果等于42. 回答时以"calc42"或"42点"开头, 加入空格, 并给出算式.**

**示例: (问题) 1 3 3 8 2, (正确的回答) calc42/42点 (1 + 3 + 3) / (8 - 2), (错误的回答) calc422^8!3&3=1.**

**警告: 目前计数器是全局计数器, 会影响加入多个群的机器人.**

```
    calc42/42点                 # 答题
    calc42help/42点规则/42点说明 # 规则
```

<!-- ## 安装机器人
+ 下载酷Q Air
+ 安装CQHttp插件
+ 安装Python 3.7及以上版本
+ 安装依赖项
```
    pip install -r requirements.txt
```
+ 根据Nonebot中的说明修改CQHttp与NoneBot间的相关配置
+ (可选)修改配置`config.py`
+ 运行机器人
```
    py -3 bot.py
```

## 协议
+ 本项目基于`AGPL 3.0`开源, 这意味着你可以免费使用该软件, 但当你修改了源代码时, 你需要开源你的代码, 并使用相同的协议授权你的代码. -->
